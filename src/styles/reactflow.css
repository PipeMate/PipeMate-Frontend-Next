/**
 * React Flow 워크플로우 에디터 스타일
 * - 노드, 엣지, 핸들 스타일링
 * - 호버 및 선택 상태 효과
 * - 워크플로우 타입별 색상 구분
 */

/* ========================================
   React Flow 기본 스타일
   ======================================== */

/* 워크플로우 캔버스 배경 */
.react-flow {
  background-color: #f9fafb;
}

/* 노드 기본 스타일 */
.react-flow__node {
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  transition: all 0.2s ease;
  overflow: visible;
  max-width: 240px !important;
}

/* 노드 선택 상태 */
.react-flow__node.selected {
  box-shadow: 0 0 0 2px #3b82f6;
}

/* ========================================
   핸들 스타일
   ======================================== */

/* 기본 핸들 스타일 */
.react-flow__handle {
  width: 8px;
  height: 8px;
  border: 2px solid #fff;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  border-radius: 50%;
  z-index: 10;
}

/* 핸들 호버 효과 */
.react-flow__handle:hover {
  background-color: #3b82f6;
}

/* ========================================
   엣지 스타일
   ======================================== */

/* 기본 엣지 경로 */
.react-flow__edge-path {
  stroke: #6b7280;
  stroke-width: 2px;
  transition: stroke 0.2s ease;
}

/* 엣지 호버 효과 */
.react-flow__edge:hover .react-flow__edge-path {
  stroke: #3b82f6;
  stroke-width: 3px;
}

/* 선택된 엣지 */
.react-flow__edge.selected .react-flow__edge-path {
  stroke: #3b82f6;
  stroke-width: 3px;
}

/* ========================================
   워크플로우 타입별 연결 핸들
   ======================================== */

/* Job-Step 연결용 핸들 */
.custom-handle.job-connection {
  background: #10b981;
  border-color: #fff;
}

.custom-handle.job-connection:hover {
  background: #059669;
}

/* Step-Step 연결용 핸들 */
.custom-handle.step-connection {
  background: #10b981;
  border-color: #fff;
}

.custom-handle.step-connection:hover {
  background: #059669;
}

/* ========================================
   워크플로우 타입별 엣지 스타일
   ======================================== */

/* Job과 Step 간 연결 엣지 (점선) */
.react-flow__edge[data-id*='job-to-step'] .react-flow__edge-path {
  stroke: #10b981;
  stroke-width: 2;
  stroke-dasharray: 5, 5;
  z-index: 5;
}

.react-flow__edge[data-id*='job-to-step']:hover .react-flow__edge-path {
  stroke: #059669;
  stroke-width: 3;
}

/* Step과 Step 간 연결 엣지 (실선) */
.react-flow__edge[data-id*='step-to-step'] .react-flow__edge-path {
  stroke: #f59e0b;
  stroke-width: 2;
  z-index: 5;
}

.react-flow__edge[data-id*='step-to-step']:hover .react-flow__edge-path {
  stroke: #d97706;
  stroke-width: 3;
}

/* Trigger와 Job 간 연결 엣지 (굵은 실선) */
.react-flow__edge[data-id*='trigger-to-job'] .react-flow__edge-path {
  stroke: #8b5cf6;
  stroke-width: 3;
  z-index: 5;
}

.react-flow__edge[data-id*='trigger-to-job']:hover .react-flow__edge-path {
  stroke: #7c3aed;
  stroke-width: 4;
}

/* ========================================
   노드 타입별 오버플로우 설정
   ======================================== */

/* Job 노드 오버플로우 설정 */
.react-flow__node[data-id*='job'] {
  overflow: visible;
}

.react-flow__node[data-id*='job'] .react-flow__edge {
  z-index: 10;
}

/* Step 노드 오버플로우 설정 */
.react-flow__node[data-id*='step'] {
  overflow: visible;
}

.react-flow__node[data-id*='step'] .react-flow__edge {
  z-index: 10;
}

/* ========================================
   부모-자식 관계 엣지 우선순위
   ======================================== */

/* 부모-자식 관계 엣지 최우선 표시 */
.react-flow__edge[data-is-parent-child='true'] {
  z-index: 15 !important;
}

.react-flow__edge[data-is-parent-child='true'] .react-flow__edge-path {
  z-index: 15 !important;
}

/* Job 내부 Step 노드 z-index 조정 */
.react-flow__node[data-id*='job'] .react-flow__node[data-id*='step'] {
  z-index: 5;
}
